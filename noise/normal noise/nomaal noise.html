<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Normal Noise</title>
</head>
<body>
  <canvas id="canvas" width="400" height="400"></canvas>

  <script src="../../WebglProGuide/lib/webgl-utils.js"></script>
  <script>
    var VERTEX_SHADER =
    'attribute vec4 a_Position;\n' +
    'attribute vec4 a_Color;\n' +
    'varying vec4 v_Color;\n' +
    'void main() {\n' +
    ' gl_Position = a_Position;\n' +
    ' gl_PointSize = 10.0;\n' +
    ' v_Color = a_Color;\n' +
    '}';
    var FRAGMENT_SHADER = 
    'precision mediump float;\n' +
    'varying vec4 v_Color;\n' +
    'void main() {\n' +
    ' gl_FragColor = v_Color;\n' +
    '}';

    main();

    function main() {
      const canvas = document.getElementById('canvas');
      const gl = getWebGLContext(canvas);

      initShaders(gl, VERTEX_SHADER, FRAGMENT_SHADER);

      gl.clearColor(0.5, 0.6, 0.7, 1.0);
      gl.clear(gl.COLOR_BUFFER_BIT);

      var n = initVertexBuffers(gl);

      gl.drawArrays(gl.POINTS, 0, n);
      // gl.drawArrays(gl.TRIANGLES, 0, n);


      function initVertexBuffers(gl){
        gl.width = 2;
        gl.height = 2;
        var particles = [];
        for(var j = 0; j <=gl.height; j++){
          var y = (j-gl.height/2) / gl.height;
          for(var i = 0; i <=gl.width; i++ ){
            var x=0;
            if(i<gl.width/2){
              x = i-gl.width/2;
            } else {
              x =
            }
            // var x = (i-gl.width/2) / gl.width;
            var colorInfo = [0.0, 0.0, 0.0];
            if(i%2 == 0 && j%2 ==0) colorInfo = [1.0, 1.0, 1.0];
            if(i%2 == 0 && j%2 !=0) colorInfo = [0.0, 0.0, 0.0];
            if(i%2 != 0 && j%2 ==0) colorInfo = [0.0, 0.0, 0.0];
            if(i%2 != 0 && j%2 !=0) colorInfo = [1.0, 1.0, 1.0];
            var pointInfo = [x, y]
            particles = particles.concat(pointInfo).concat(colorInfo)
          }
        }
        consoleVertices(particles, 5);
        var vertices = new Float32Array(particles)
        // var vertices = new Float32Array([
        //   -1.0,  0.0, 1.0, 0.0, 0.0,
        //    0.0,  1.0, 0.0, 1.0, 0.0,
        //    1.0,  0.0, 0.0, 0.0, 1.0
        // ]);
        var n = gl.width * gl.height;
        var FSIZE = vertices.BYTES_PER_ELEMENT;
        
        var vertexBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
        var a_Position = gl.getAttribLocation(gl.program, 'a_Position');
        gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, FSIZE*5, 0);
        gl.enableVertexAttribArray(a_Position);

        var colorBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
        var a_Color = gl.getAttribLocation(gl.program, 'a_Color');
        gl.vertexAttribPointer(a_Color, 3, gl.FLOAT, false, FSIZE*5, FSIZE*2);
        gl.enableVertexAttribArray(a_Color);
        return n;
      }
    }
  </script>
</body>
</html>