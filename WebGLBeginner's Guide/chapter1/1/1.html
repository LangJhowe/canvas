<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>WebGlBeginner's Guide Chapter1</title>
  <style>
    #canvas{border:2px dotted blue;}
  </style>
  <script>
    // https://max.book118.com/html/2015/1126/30241237.shtm
    var gl = null;
    var c_width = 0;
    var c_height = 0;
    var t =12
    window.onkeydown = checkKey;
    console.log(gl)

    function checkKey(ev) {
      console.log(t)
      switch(ev.keyCode) {
        case 49:{
          gl.clearColor(0.3,0.4,0.2,1.0);
          clear(gl);
          break;
        }
        case 50:{
          gl.clearColor(0.3,0.2,0.7,1.0);
          clear(gl);
          break;
        }
        case 51:{
          var color = gl.getParameter(gl.COLOR_CLEAR_VALUE);
          alert('clearColor = (' + 
                      Math.round(color[0]*10)/10 + 
                ',' + Math.round(color[0]*10)/10 +
                ',' + Math.round(color[0]*10)/10 + ")");
                window.focus();
          break;
        }
      }
    }
    function getGLContext() {
      var canvas = document.getElementById("canvas");
      if (canvas == null) {
        alert("there is no canvas on this page");
        return
      }
      var names = ["webgl","experimental-webgl","webkit-3d","moz-webgl"];

      for(var i = 0; i < names.length; ++i){
        try{
          console.log(names[i])
          gl = canvas.getContext(names[i]);
          t = 10
          console.log('catch')
        } 
        catch(e) {}
        if(gl) break;
      }
      if (gl == null) {
        alert("WebGl is not available");
      } else{
        alert("Horray! You got a WebGl context")
        return gl;
      }
    }
    function clear(ctx) {
      ctx.clear(ctx.COLOR_BUFFER_BIT);
      ctx.viewport(0, 0, c_width, c_height);
    }
    function initWebGl(){
      al = getGLContext()
    }


  </script>
</head>
<body onload="initWebGl()">
  <canvas id="canvas" width="800" height="600">
    your browser does not support HTML5
  </canvas>
</body>
</html>